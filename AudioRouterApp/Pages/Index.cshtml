@page
@model IndexModel
@{
    ViewData["Title"] = "Ovládání";
}
@inject RecordingController RecordingController

<div>
    <h1 class="display-6">Ovládání</h1>

    <div class="mt-3">
        @if(RecordingController.State != RecordingState.Recording)
        {
            <a class="btn btn-success" href="@Url.Page("Index", "StartRecording")">Spustit nahrávání</a>
        }
        else
        {
            <a class="btn btn-danger" href="@Url.Page("Index", "StopRecording")">Ukončit nahrávání</a>
        }
    </div>

    <div class="mt-3">
        @if (RecordingController.RecordingStart != DateTime.MinValue)
        {
            <div>Začátek nahrávání: <b>@RecordingController.RecordingStart.ToString("dd.MM.yyyy HH:mm:ss")</b></div>
        }
        @if(RecordingController.RecordingStart != DateTime.MinValue && RecordingController.RecordingEnd == DateTime.MinValue)
        {
            <div>Průběžná délka: <b>@((DateTime.Now - RecordingController.RecordingStart).ToString(@"hh\:mm\:ss"))</b></div>
        }
        @if (RecordingController.RecordingEnd != DateTime.MinValue)
        {
            <div>Konec nahrávání: <b>@RecordingController.RecordingEnd.ToString("dd.MM.yyyy HH:mm:ss")</b></div>
            <div>Délka záznamu: <b>@((RecordingController.RecordingEnd - RecordingController.RecordingStart).ToString(@"hh\:mm\:ss"))</b></div>
        }
    </div>
</div>


<script type="text/javascript">
    setTimeout(function () {
        location = ''
    }, 5000)
</script>